# 리팩터링 카탈로그

## 함수 추출하기

- "단일 책임 원칙", 한 개의 함수는 하나의 기능만을 수행하는 것이 바람직합니다.
- "목적과 구현을 분리"
- 함수가 하나의 기능만을 수행하면, 함수명을 짓기에도 용이합니다.  
  그리고 그만큼 함수 이름만으로도 기능에 대해서 유추하기가 쉬워집니다.
- 함수 호출 횟수가 늘어남에 따른 성능 고민은 고민할 거리도 아닌 시대입니다.  
  또, 함수 단위로 캐싱이 되는 점도 있기 때문에 언제나 성능이 나빠진다고 할 수도 없습니다.
- "최적화는 하지 말고, 그리고 또 하지 말라"는 말이 있다고 합니다.

> 함수 명명하기: 함수가 "어떻게" 기능을 수행하는지가 아니라, "어떤" 기능을 수행하는지를 표현해야 합니다.

## 함수 인라인하기

- 추출해서 작성한 함수의 본문이 구조가 명확해서 이해하기 좋다면  
  굳이 간접 호출을 통해서 복잡도를 높이기보다 인라인으로 풀어 쓰는 게 나을 수도 있습니다.
- 그만큼 명료한 구조가 아니라면, 인라인했을 때 기존 코드의 이해를 어렵게 만들 수 있기 때문에  
  고민할 여지가 있다면 함수 인라인이 적합하지 않다고 생각해도 될 것입니다.

## 변수 추출하기

- 수 계산 등의 표현식이 지나치게 복잡한 경우에, 함수를 추출하는 방식과 동일하게  
  변수 계산식을 분리해서 작성할 수 있습니다.
- 특정 함수의 문맥에만 제한되어 있는 경우에는 일반적으로 변수로 추출하는 것이 용이할 것이고  
  다른 영역에도 영향을 미치는 표현식의 경우에는 파라미터 등을 입력받을 수 있는 함수 형태가 더 적합합니다.

## 변수 인라인하기

- 함수 인라인하기와 마찬가지로, 변수로 작성된 표현식의 구조가 간단하여  
  추출되지 않아도 될 정도라면 인라인으로 표현식을 작성할 수 있습니다.

## 함수 선언 바꾸기

- 함수를 선언할 때, 함수의 **이름**과 **매개 변수**를 지정하는데  
  함수명을 명료하게 바꾸는 것이 기능을 이해하는 데 도움이 될 수 있습니다.
- 매개변수는 특정 문맥에 제한되어 입력되지 않아야, 함수를 재사용하는 데 도움이 될 수 있습니다.

## 변수 캡슐화하기

- 이곳 저곳에 사용되는 변수의 형태를 변경할 때에는, 해당 변수를 참조하는 코드 부분을 모두 찾아 내용을 바꾸어야 하는 일이 생길 수도 있습니다.
- 이런 경우에는 변수를 사용하는 코드에서, 변수 객체에 직접 접근하는 것이 아니라 "변수에 대신 접근하는 함수"를 이용하는 것이 추후 변경사항에 대응하기에 더 용이합니다.
- 해당 변수를 참조하는 모든 코드에서, 대신 변수에 접근하는 함수를 공통으로 사용하면 해당 "전달 함수"의 구현만을 바꾸면 모든 코드 구문에 변경사항을 적용할 수가 있게 됩니다.
- private 멤버 변수에 접근하는 `get`함수, `set`함수를 생각하면 간단합니다.

## 변수 이름 바꾸기

- 변수의 이름은 함수의 이름만큼이나 당연히 중요합니다.
- 변수가 어떤 값을, 어떤 목적으로 가지고 있느냐를 이름에 담을 수 있어야 합니다.
- 저자인 마틴 파울러는 동적 타입 언어인 자바스크립트와 같은 경우에는 타입을 드러내는 문자를 붙여 가며 변수명을 짓는다고 합니다.  
  (예시로 `aCustomer`라는 변수명을 들었는데 어떤 점에서 타입을 드러냈다는 것인지 잘 모르겠습니다  
  List같은 게 아니라 단일 객체임을 뜻하는 의미에서 `a`를 붙였다는 뜻일까요?)

## 매개변수 객체 만들기

- 한 함수에 들어가는 매개변수들이, 밀접한 관계를 맺어서 항상 묶음처럼 데이터가 입력되는 경우가 있습니다.
- 대표적으로 "범위"를 표현하는 데이터들이 있는데, 이런 경우에 "시작 값"과 "끝 값" 데이터를 갖는 객체를 선언하여 사용하는 것으로  
  매개변수를 객체로 만들 수 있습니다.
- 두 변수 사이의 밀접함을 객체 변수로서 표현할 수 있고, 함수를 작성하는 데에도 편리해집니다.
- 한 단계 더 나아가서, 단순 객체가 아니라 *클래스*로 만들면, 나중에 **메소드를 같이 묶어야 할 때** 도움이 되는 구조가 됩니다.

## 여러 함수를 클래스로 묶기

- 공통된 데이터를 사용하는 함수들을, 클래스로 묶어 관리할 수도 있습니다.
- 공통된 데이터를 사용한다는 것은, 공통된 도메인이 있다는 것이기 때문에 클래스명을 짓기에도 명확할 것입니다.
- 그리고 공통 데이터를 클래스 내부에서 관리해줄 것이기 때문에, 매개변수를 일일이 전달하는 등의 작업을 하지 않아도 원하는 기능을 수행할 수도 있을 것입니다.
- 여기서의 데이터를 클래스로 옮기는 과정에서, 위의 **"매개변수 객체 만들기"**를 이용하게 됩니다.

## 여러 함수를 변환 함수로 묶기

- 어떤 데이터에 추가 정보를 더한다거나, 형태를 변형하는 등의 함수들을 자주 사용하게 됩니다.
- 그리고 이런 변환 작업들은 두 단계를 거쳐서 일어날 수도 있는데, 이 때 단일 책임 원칙에 따르면 각 단계에 따른 함수를 따로 만들게 될 것입니다.
- 하지만 데이터 처리 작업이 항상 정해진 단계를 거쳐서 일어난다면, 각각의 함수를 호출하는 변환 함수를 만들어 함수를 묶을 수 있습니다.
- 앞서 확인한 "클래스로 묶기"와 비슷하게 볼 수 있지만, 변환 함수의 경우에는 특정 함수들이 같이 호출되어야 하는 상황에 더 적합할 것입니다.

## 단계 쪼개기

- 데이터 조작에 여러 단계의 처리가 발생할 수 있습니다.
- 그런 과정에서하나의 기능을 위해 한 번에 여러 데이터에 접근할 수도 있을텐데  
  이 때에는 각각의 데이터를 사용하는 부분을 별개로 모듈화하면 코드가 더 간단해지고  
  특정 데이터에 대한 로직을 분리하여서 관리할 수 있을 것입니다.
